<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> MySQL5.6 部分特性介绍 · Rust.Love</title><meta name="description" content="MySQL5.6 部分特性介绍 - OutMan"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://rust.love/atom.xml" title="Rust.Love"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">MySQL5.6 部分特性介绍</h1><div class="post-info">Dec 22, 2015</div><div class="post-content"><h3 id="Memcached">Memcached</h3><p>登陆 MySQL 查看插件目录，安装对应的配置数据表<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql -hlocalhost -uroot -p</span><br><span class="line">mysql &gt; SELECT @@plugin<span class="emphasis">_dir; // 查看插件目录</span><br><span class="line"></span><br><span class="line"></span><span class="comment">// 导入 memcache 相关的表</span></span><br><span class="line">mysql &gt; SOURCE /usr/local/mysql/share/innodb<span class="emphasis">_memcached_</span>config.sql</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 多了一个 innodb_memcache 库</span></span><br><span class="line"><span class="header">mysql&gt; show databases;</span><br><span class="line">+------------------------+</span></span><br><span class="line"><span class="header">| Database               |</span><br><span class="line">+------------------------+</span></span><br><span class="line">| information<span class="emphasis">_schema     |</span><br><span class="line">| innodb_</span>memcache        |</span><br><span class="line"><span class="header">| test                   |</span><br><span class="line">+------------------------+</span></span><br><span class="line">……</span><br></pre></td></tr></table></figure></p>
<p>激活和卸载插件<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; I<span class="built_in">NSTALL</span> PLUGIN daemon_memcached soname <span class="string">"libmemcached.so"</span>;  <span class="comment">//  激活插件</span></span><br><span class="line">mysql&gt; UNI<span class="built_in">NSTALL</span> PLUGIN daemon_memcached; <span class="comment">// 卸载插件</span></span><br></pre></td></tr></table></figure></p>
<p>通过 MySQL 查看配置信息<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">myssql&gt; SHOW VARIABLES <span class="keyword">LIKE</span> <span class="comment">'%memcached%';</span></span><br><span class="line"></span><br><span class="line">daemon_memcached_enable_binlog  <span class="keyword">OFF</span></span><br><span class="line">daemon_memcached_engine_lib_name    innodb_engine.so</span><br><span class="line">daemon_memcached_engine_lib_path    </span><br><span class="line">daemon_memcached_option </span><br><span class="line">daemon_memcached_r_batch_size   <span class="number">1</span></span><br><span class="line">daemon_memcached_w_batch_size   <span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<p>查看 Memcached<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">shell</span> &gt; telnet localhost <span class="number">11211</span></span><br><span class="line">stats</span><br><span class="line"></span><br><span class="line">Trying ::<span class="number">1.</span>..</span><br><span class="line">Connected <span class="built_in">to</span> localhost.</span><br><span class="line">Escape <span class="keyword">character</span> is <span class="string">'^]'</span>.</span><br><span class="line">stats</span><br><span class="line">STAT pid <span class="number">94</span></span><br><span class="line">STAT uptime <span class="number">317</span></span><br><span class="line">STAT <span class="built_in">time</span> <span class="number">1450766105</span></span><br><span class="line">STAT <span class="built_in">version</span> <span class="number">5.6</span><span class="number">.27</span></span><br><span class="line">STAT libevent <span class="number">5.6</span><span class="number">.27</span></span><br><span class="line">STAT pointer_size <span class="number">64</span></span><br><span class="line">STAT rusage_user <span class="number">16.726572</span></span><br><span class="line">STAT rusage_system <span class="number">18.890886</span></span><br><span class="line">……</span><br></pre></td></tr></table></figure></p>
<p>innodb_memcache 库的详细信息<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use innodb<span class="emphasis">_memcache;</span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line"></span>Database changed</span><br><span class="line"><span class="header">mysql&gt; show tables;</span><br><span class="line">+---------------------------+</span></span><br><span class="line"><span class="header">| Tables_in_innodb_memcache |</span><br><span class="line">+---------------------------+</span></span><br><span class="line">| cache<span class="emphasis">_policies            |</span><br><span class="line">| config_</span>options            |</span><br><span class="line"><span class="header">| containers                |</span><br><span class="line">+---------------------------+</span></span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<p>cache_policies 缓存策略</p>
<ul>
<li>innodb_only 只使用InnoDB作为数据存储</li>
<li>cache-only  只使用传统的Memcached引擎作为后端存储</li>
<li>caching     二者皆使用，如果在Memcached里找不到，就查询InnoDB</li>
</ul>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select <span class="keyword">*</span> from cache_policies \G</span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span> 1. row <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line">  policy_name: cache_policy</span><br><span class="line">   get_policy: innodb_only</span><br><span class="line">   set_policy: innodb_only</span><br><span class="line">delete_policy: innodb_only</span><br><span class="line"> flush_policy: innodb_only</span><br></pre></td></tr></table></figure>
<p>config_options 配置参数</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select <span class="keyword">*</span> from config_options \G</span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span> 1. row <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line"> name: separator   // Memcached只识别单值，使用此分隔符（|<span class="string">）来连接多个字段的值，需要注意当值内含有`</span>|<span class="string">`的时候，会带来错误，所以需要修改 separator</span><br><span class="line">value: </span>|</span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span> 2. row <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line"> name: table_map_delimiter // 通过此分隔符（.）来确认表和键，如：@<span class="comment">@table.key。</span></span><br><span class="line">value: .</span><br></pre></td></tr></table></figure>
<p>如果通过 Memcached 协议来访问数据表，还需要在 containers 表里做一些配置 <code>demo_test</code> 是开始 SOURCE 导入 <code>innodb_memcached_config.sql</code> 文件的时候生成的。</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT <span class="keyword">*</span> FROM containers\G</span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span> 1. row <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line">                  name: aaa</span><br><span class="line">             db_schema: test</span><br><span class="line">              db_table: demo_test</span><br><span class="line">           key_columns: c1</span><br><span class="line">         value_columns: c2</span><br><span class="line">                 flags: c3</span><br><span class="line">            cas_column: c4</span><br><span class="line">    expire_time_column: c5</span><br><span class="line">unique_idx_name_on_key: PRIMARY</span><br></pre></td></tr></table></figure>
<p>查看 demo_test 表结构<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">mysql&gt; DESC test.demo_test;</span><br><span class="line">+-------+---------------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field | Type                | Null | Key | Default | Extra |</span><br><span class="line">+-------+---------------------+------+-----+---------+-------+</span></span><br><span class="line">| c1    | varchar(32)         | NO   | PRI |         |       |</span><br><span class="line">| c2    | varchar(1024)       | YES  |     | NULL    |       |</span><br><span class="line">| c3    | int(11)             | YES  |     | NULL    |       |</span><br><span class="line">| c4    | bigint(20) unsigned | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| c5    | int(11)             | YES  |     | NULL    |       |</span><br><span class="line">+-------+---------------------+------+-----+---------+-------+</span></span><br><span class="line">5 rows in set (0.01 sec)</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; select * from test.demo_test;</span><br><span class="line">+----+--------------+------+------+------+</span></span><br><span class="line"><span class="header">| c1 | c2           | c3   | c4   | c5   |</span><br><span class="line">+----+--------------+------+------+------+</span></span><br><span class="line"><span class="header">| AA | HELLO, HELLO |    8 |    0 |    0 |</span><br><span class="line">+----+--------------+------+------+------+</span></span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<p>通过 Memcached 协议获得数据<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; telnet localhost <span class="number">11211</span></span><br><span class="line">Trying ::<span class="number">1.</span>..</span><br><span class="line">Connected to localhost.</span><br><span class="line">Escape character <span class="keyword">is</span> <span class="string">'^]'</span>.</span><br><span class="line"><span class="literal">get</span> @<span class="annotation">@aaa</span>.AA   <span class="comment">// aaa 就是 containers 表的 name 字段的值，相当于 `db_schema.db_table`</span></span><br><span class="line">VALUE @<span class="annotation">@aaa</span>.AA <span class="number">8</span> <span class="number">12</span> <span class="comment">// VALUE &lt;key&gt; &lt;flags&gt; &lt;bytes&gt;</span></span><br><span class="line">HELLO, HELLO</span><br><span class="line">END</span><br></pre></td></tr></table></figure></p>
<p>通过 php 来访问这个数据<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$mc</span> = new Memcache();</span><br><span class="line"><span class="variable">$mc-</span>&gt;connect(<span class="string">'127.0.0.1'</span>, <span class="number">11211</span>);</span><br><span class="line">var_dump(<span class="variable">$mc-</span>&gt;get(<span class="string">'@@aaa.AA'</span>));  // 这里需要注意如果 `containers` 有多行数据的时候，需要使用表前缀 `@@name.` 如果不使用表名，那么会默认会按照表名的字母顺序，取第一个。如果 `containers` 只有一行数据 name 为 `aaa`，那么默认 `get(<span class="string">'AA'</span>)` 也是会取 `@aaa.AA`</span><br></pre></td></tr></table></figure></p>
<h3 id="DDL_online">DDL online</h3><p>修改表结构是我们开发过程中经常遇到的事情，早期 MySQL 版本在修改表结构的时候，主要采用以下方式：</p>
<ul>
<li>创建临时表 <code>tmp</code> ，该表与原表 <code>table</code> 相似</li>
<li>将<code>table</code>数据复制到 <code>tmp</code>，</li>
<li>删除原有表 <code>table</code></li>
<li>rename tmp to table<br>如果数据量非常大的情况下，整个表被加共享锁，基本就不能提供服务了。</li>
</ul>
<p>在 MySQL5.6 中，这个操作有了改善，在 <code>ALERT TABLE</code> 语法上，增加了 <code>| ALGORITHM [=] {DEFAULT|INPLACE|COPY}</code> 选项，如果没有指定 <code>ALGORITHM</code> ，MySQL 会根据支持的算法，自动选择，而 <code>INPLACE</code> 会优先被选择，这样就可以在修改表的时候依然可以提供服务。有些 Online DDL 是不支持的，有些是有依赖条件的，MySQL 官方明确的列出了一个表格 <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-create-index-overview.html" target="_blank" rel="external">Online DDL 操作总结</a></p>
<h3 id="MySQL_复制的新特性">MySQL 复制的新特性</h3><ul>
<li><p>多线程复制 由于数据库的主从架构，以前的MySQL版本主库多线程写入，为了保证<code>顺序</code>从库是单线程读取，现在的多线程复制是为每个数据库开启了一个单独的线程（sql thread），所以如果要使用多线程复制特性，需要把库拆分成多个，如果还是一个数据库，那么这个多线程复制特性无效。</p>
</li>
<li><p>GTID 全局事务ID（global transaction identifier），GTID 是事务提交时创建分配的唯一标识符，所有事务均与 GTID 一一映射。以前如果主从复制断了，需要人工去找到断点，重新开始，而 GTID 的引入可以自动寻找同步点，自动完成复制，不需要人工干预。</p>
</li>
<li><p>基于 Row 复制只保存改变的列，降低硬盘、网络、内存等消耗。</p>
</li>
<li>支持把 Master 和 Slave 的相关信息记录在表中，原来是记录在文件里，记录在表里，增强可用性。</li>
<li>支持延时复制。</li>
</ul>
<p>GTID 的格式类似 server_uuid:id</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">mysql&gt; select @@server_uuid;</span><br><span class="line">+--------------------------------------+</span></span><br><span class="line"><span class="header">| @@server_uuid                        |</span><br><span class="line">+--------------------------------------+</span></span><br><span class="line"><span class="header">| fbf78286-701a-11e5-a88b-5b1557785233 |</span><br><span class="line">+--------------------------------------+</span></span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>该数据被写在 <code>DATADIR (/usr/local/mysql/data/auto.cnf)</code> 文件中，第一次启动的时候由 <code>generate_server_uuid</code> 函数生成。<br>id 是事务编号， server_uuid:id 共同组成了事务的唯一 ID，用来标示一个事务。<br>GTID 复制有着严格的限制，GTID 实例和非 GTID 实例是不能进行复制的。<br><a href="http://dev.mysql.com/doc/refman/5.6/en/replication-gtids.html" target="_blank" rel="external">GTID 官方文档</a> , <a href="http://mysql.taobao.org/index.php?title=MySQL%E5%86%85%E6%A0%B8%E6%9C%88%E6%8A%A5_2014.09&amp;oldid=848" target="_blank" rel="external">MySQL 内核月报参考</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/01/05/yaf_php_framework/" class="prev">上一篇</a><a href="/2015/12/07/migrate_api_from_yii1_to_yii2/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://rust.love">OutMan</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>